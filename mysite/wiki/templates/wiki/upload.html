{% extends 'wiki/base.html' %}
{% load static %}

<!--Title-->
{% block content %}
{% block contentTitle %}

<!--Back To Top Button-->
<section>
    <!--Back To Top Button Style-->
    <style>
        /*Button Apperence*/
        #topBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            font-size: 18px;
            background-color: red;
            color: white;
            padding: 15px;
            border-radius: 4px;
            font-family: Arial, Helvetica, sans-serif;
        }

        /*When Button Is Hovered Over*/
        #topBtn:hover {
            background-color: #555;
        }
    </style>

    <!--Back To Top Button-->
    <button onclick="topFunction()" id="topBtn" title="Go to top">Top</button>

    <!--Back To Top Button Script-->
    <script>
        // When the user scrolls down 30px from the top of the document, show the button
        window.onscroll = function () { scrollFunction() };

        function scrollFunction() {
            if (document.body.scrollTop > 30 || document.documentElement.scrollTop > 30) {
                document.getElementById("topBtn").style.display = "block";
            } else {
                document.getElementById("topBtn").style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
</section>

<!--Navbar-->
<section>

    <!--Navbar Extension Feature-->
    <nav class="navbar navbar-dark bg-dark">
        <!--Aligns Button-->
        <div class="container">
            <!--Navbar Collapse Button-->
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <!--Navbar Button Icon-->
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <!--Navbar Contents-->
    <div class="pos-f-t">
        <div class="collapse" id="navbarToggleExternalContent">
            <!--Aligns Contents-->
            <div class="container">
                <ul class="navbar-nav mr-auto">
                    <!--Wiki Index-->
                    <li class="nav-item active"><a class="nav-link" href="{% url 'wiki:index' %}"
                            style="font-size: 20px;">Wiki Index<span class="sr-only">(current)</span></a></li>
                    <!--Upload (Disabled)-->
                    <li class="nav-item active"><a class="nav-link disabled" href="{% url 'wiki:upload_page' %}"
                            style="font-size: 20px;">Upload<span class="sr-only">(current)</span></a></li>
                    <!--Login/Logout Button-->
                    <li class="nav-item active"><a class="nav-link" href="#"><span class="sr-only">(current)</span></a>
                    </li>
                    <li>
                        <!--Login / Logout Button-->
                        <!--Log out-->
                        {% if user.is_authenticated %}
                        <a href="{% url 'wiki:logout' %}" class="btn btn-danger"
                            style="align-self: right; font-size: 20px;">Logout</a><br><br>
                        <!--Log in-->
                        {% else %}
                        <a href="{% url 'wiki:logout' %}" class="btn btn-primary" style="font-size: 20px;">Login</a><br>
                        <br>
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
<hr />

<section>
    <div class="container">
        <!--Sub Title-->
        <h2 style="font-size: 30px;">Upload A File</h2><br>

        <!--Upload File Form-->
        <!--Form Type-->                   <!--Where the files go:-->
        <form method="POST" enctype="multipart/form-data" action="/wiki/upload/">
            {% csrf_token %}
            <input type="hidden" name="csrfmiddlewaretoken"
                value="bL12YEcEMe2Bta75wUnLuma0KUJkITO6BSOHSNwzGIvnwjGkAB46Uf0ckESwBrBC">
            <!--Upload Label-->
            <h2 style="font-size: 20px; margin: 0 20px 0 0; color: #0078F8;">Upload: </h2>
            <!--Select File Form-->
            <input class="btn" type="file" name="upload" required="" id="id_upload">
            <!--Upload File Form-->
            <input class="btn btn-primary" type="submit" value="Upload" style="margin: 0 0 0 100px">
        </form>
    </div>
</section>
<hr />

<section>
    <div class="container">
        <h2 style="font-size: 30px;">Uploaded Files:</h2>
        <div class="container">
            {% if files %}
            <ul class="list-group" id="listorder">
                {% for file in files %}
                <li class="list-group-item"><a href="{{file.upload.url}}">{{file.upload.name}}</a></li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No uploaded files</p>
            {% endif %}
        </div>
    </div>
</section>

{% endblock %}
{% endblock %}