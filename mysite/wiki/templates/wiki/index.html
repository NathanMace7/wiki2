{% extends "wiki/base.html" %}
{% load static %}

<!--Title-->
{% block content %}
{% block contentTitle %}

<ul class="flex-container">
    <li>
        <h2 class="text-primary" style="font-size: 30px;">Wiki Index</h2>
    </li>
    <ul class="flex-container">
        <li>
            <!--Login / Logout Button-->
            <!--Log out-->
            {% if user.is_authenticated %}
            <a href="{% url 'wiki:logout' %}" class="btn btn-danger" style="align-self: right;">Logout</a><br><br>
            {% else %}
            <a href="{% url 'wiki:logout' %}" class="btn btn-primary">Login</a><br>
            <br>
            {% endif %}
        </li>
    </ul>
</ul>

<!--Back To Top Button Style-->
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 20px;
    }

    #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;
        background-color: red;
        color: white;
        padding: 15px;
        border-radius: 4px;
    }

    #myBtn:hover {
        background-color: #555;
    }
</style>
<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
{% endblock %}

<!--Index List-->
<div class="container">
    {% if pages %}
    <ul class="list-group" id="listorder">
        {% for page in pages %}
        <li class="list-group-item"><a href="{% url 'wiki:detail' page.title %}">{{ page.title }}</a></li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No pages are available.</p>
    {% endif %}

    <!--This script sorts the Index List alphabetically automatically-->
    <script>
       /* function sortList()*/ {
            var list, i, switching, b, shouldSwitch;
            list = document.getElementById("listorder");
            switching = true;
            /* Make a loop that will continue until
            no switching has been done: */
            while (switching) {
                // start by saying: no switching is done:
                switching = false;
                b = list.getElementsByTagName("LI");
                // Loop through all list-items:
                for (i = 0; i < (b.length - 1); i++) {
                    // start by saying there should be no switching:
                    shouldSwitch = false;
                    /* check if the next item should
                    switch place with the current item: */
                    if (b[i].innerHTML.toLowerCase() > b[i + 1].innerHTML.toLowerCase()) {
                        /* if next item is alphabetically
                        lower than current item, mark as a switch
                        and break the loop: */
                        shouldSwitch = true;
                        break;
                    }
                }
                if (shouldSwitch) {
                    /* If a switch has been marked, make the switch
                    and mark the switch as done: */
                    b[i].parentNode.insertBefore(b[i + 1], b[i]);
                    switching = true;
                }
            }
        }
    </script>

    <!--Back To Top Button Script-->
    <script>
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function () { scrollFunction() };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("myBtn").style.display = "block";
            } else {
                document.getElementById("myBtn").style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
</div>
{% endblock content %}